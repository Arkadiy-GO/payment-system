# Платежная система на Go

Этот проект представляет собой **платежную систему**, реализованную на языке Go. Система позволяет отправлять средства между кошельками, проверять баланс и просматривать историю транзакций.

---

## Основные функции

- **Отправка средств**:
  - Пользователь может отправить деньги с одного кошелька на другой.
  - Проверяется наличие достаточного баланса у отправителя.

- **Получение баланса**:
  - Пользователь может узнать текущий баланс своего кошелька.

- **Просмотр транзакций**:
  - Пользователь может получить информацию о последних N транзакциях.

- **Инициализация кошельков**:
  - При первом запуске создаются 10 кошельков с начальным балансом 100.0 у.е.

---

## Технологии

- **Язык программирования**: Go.
- **База данных**: PostgreSQL.
- **Веб-фреймворк**: Gorilla Mux для маршрутизации HTTP-запросов.
- **Документация**: GoDoc для автоматической генерации документации.

---

## Как использовать

### Запуск проекта

1. Убедитесь, что у вас установлены Go и PostgreSQL.

2. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/Arkadiy-GO/payment-system.git
    ```
    ```
   cd payment-system
    ```
3. Соберите Docker-образ:
    ```
    docker build -t payment-system .
    ```
4. Запустите контейнеры с помощью Docker Compose:
    ```
    docker-compose up --build
    ```
5. Получите ID всех пользователей с помощью (имена таблиц прописаны в repository.go):
    ```
    docker exec -it <container_id> psql -U postgres -d payment-system -c "SELECT * FROM wallets;"
    ```
<container_id> - идентификатор контейнера с PostgreSQL. Вы можете найти его с помощью команды docker ps.
-c - позволяет выполнить SQL-запрос напрямую из командной строки.

### API
1. Отправить средства (POST):
    ```
    http://localhost:8080/api/send
    Body: { "from": "адрес_отправителя", "to": "адрес_получателя", "amount": 10.5 }
    ```
2. Получить баланс (GET):
    ```
    http://localhost:8080/api/wallet/{address}/balance
    ```
3. Получить последние транзакции (GET):
    ```
    http://localhost:8080/api/transactions?count=5
    ```

### Документация
1. Перейдите в корневую директорию и запустите godoc:
    ```
    godoc -http=:6060
    ```
2. Перейдите по ссылке с документацией:
    ```
    http://localhost:6060/pkg/payment-system/internal/db/
    ```

---

## Автор
**Горяев Аркадий Олегович**
GitHub: [https://github.com/Arkadiy-GO]
